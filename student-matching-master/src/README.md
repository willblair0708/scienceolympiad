# Mentor-Mentee Matching (MMM) app

## Tree Structure

```
.
├── auth_DB
│   ├── Dockerfile
│   ├── makefile
│   └── mmm_schema.sh
├── auth_Server
│   ├── Dockerfile
│   ├── makefile
│   └── mmm_auth_server
│       ├── ...
├── docker-compose.yml
├── graph_DB
│   └── makefile
├── graph_Server
│   ├── Dockerfile
│   ├── mmm_graph_server
│   │   ├── ...
│   └── questions.xlsx
├── README.md
└── web
```

## AUTHORIZATION DB (auth_db)

For the authorization db we are using the POSTGRES docker image with small changes.
In our image we created the user/db/tables necessary for the authorization.

## AUTHORIZATION SERVER (auth_server)
Porject based on: [blog post](https://realpython.com/blog/python/token-based-authentication-with-flask/).

### Setting up

All information is set inside the Dockerfile. Use the `.env` to modify the environment variables

#### Environment Variables
```
DB_NAME: "name of the database in the auth_db
DB_USER: "name of the user that has access to the database"
DB_PSWD: "password for the user"
DB_PORT: "port to access the database: (default=5432)"
DB_HOST: "host (default=localhost)"
APP_SETTINGS: "Settings for the server (default="project.server.config.DevelopmentConfig")"
SECRET_KEY: "secret key to generate the tokens"
```

The `SECRET_KEY` variable can be generated by the following command:

```python
import os
os.urandom(24)
```

## GRAPH DB (graph_db)

For the graph db we are using the original neo4j docker image

Variables to set:
```
NEO4J_AUTH: user/password
```

## GRAPH SERVER (graph_server)

For the graph server we are using PYTHON + FLASK

```
TO DO
```

## RUNNING THE APP

### Building

#### Full build

For building the application, go to the `mmmApp/` folder trough the terminal and run:

```sh
docker-compose build
```

This will execute the `docker-compose.yml` file and build the images needed in this app.

To change the environment variables you should change the `.env` file

#### Single build

For building a certain piece of the the app (auth_db, auth_server, graph_db, graph_server, web) you should go to the folder of the given piece of the app and create the image running in the terminal:

```sh
docker build -t "image_name"
```

### Full run

In order to run the docker images you should go to the `mmmApp/` folder and run (terminal):

```sh
docker-compose up
```
